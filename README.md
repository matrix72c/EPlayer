# EPlayer
A desktop music player based on QT 5.14.1

大学程序设计周作业，写这个的时候还不会前端（

有参考部分QT音乐播放器

<video src="https://img.matrix72.top/qt-player.mp4" controls="controls" style="max-width: 100%; display: block; margin-left: auto; margin-right: auto; margin-bottom: 10; margin-top: 10;"> your browser does not support the video tag </video>





# 播放器功能介绍

## 自适应窗口

在播放器的边缘，可以通过鼠标拉伸整个播放器窗口，大小随心

## 使用数据库管理数据

利用数据库的主键功能，实现了开发文档中所说的选座要求——歌单编号不得重复。

## 音乐播放控制

实现了开发文档中所说的选座要求——可以形成歌曲的上一首，下一首播放以及循环播放功能。

具备常规播放器具有的前进一首，后退一首，暂停\播放，拖动进度条，调整音量的功能，并支持循环、单曲循环、随机播放的三种播放模式。

## 搜索

在搜索框输入内容后，会在下方显示搜索结果，包含两个信息，1）一共搜索到相关歌曲的数量，2）相关歌曲。点击歌曲名称的一行可以直接播放歌曲

## 添加歌单

在”我的歌单“右侧有一个加号的按钮，点击后会弹出添加歌单的对话框，其中歌单是必填项，简介为选填项，若无简介，歌单详情页也不会显示简介相关标签，同时会给歌单添加一张默认图片，添加完后自动加载新建的歌单。

## 加载歌单详细信息

点击歌单列表中的歌单名称，右侧详情页即会加载该歌单的相关信息。

<!--more-->

## 播放全部

在“所有音乐”以及所有歌单的详情页上都有播放全部的按钮，点击后会在清空原有播放列表后开始播放当前歌单的全部歌曲

## 添加歌曲

在非“所有音乐”的详情页会存在“添加歌曲”的按钮，点击后会弹出添加歌曲的对话框，输入歌曲名，歌手，专辑和音乐文件路径后即可添加到相应歌单，并会实时加载在歌单详情页。

## 编辑歌单信息

在“我喜欢的”和“所有音乐”以外的所有歌单中，在歌单名称右侧有一个编辑按钮，点击可弹出对话框，对歌单的名称、简介、歌单图片进行编辑。

## 双击音乐列表

双击音乐列表会清空原有播放列表并将双击位置的歌曲添加到播放列表播放，如果双击位置不存在歌曲将不产生效果。

## 右键音乐列表

若右键的区域不存在歌曲将不会有效果，存在歌曲将出现右键菜单，共两个功能，1）从这个歌单中删除这首歌曲，2）将这首歌曲添加到其他的歌单中去。

添加到其他歌单会打开一个新的对话框，该对话框会显示除当前歌单以外的其他歌单，单击相应歌单名称即可添加完成

## 利用FFmpeg解析MP3元数据

在当前播放的媒体发生改变时，程序将利用FFmpeg读取MP3文件中的专辑图片，并显示在左下角的音乐名片区域。

## 利用正则表达式解析LRC歌词

点击左下角的音乐名片可以打开歌词界面，左侧为该歌曲的专辑图片，若无元数据则显示默认图片，右侧为歌词界面。

LRC格式的歌词形式如下：

```
[mm:ss.xx] 第一行歌词
[mm:ss.xx] 第二行歌词
...
[mm:ss.xx] 最后一行歌词
```

LRC的时间标签的格式为**[mm:ss.xx]**其中**mm**为分钟数、**ss**为秒数、**xx**为百分之一秒。

利用正则表达式处理，利用MAP将歌词映射到时间上并进行解析，最终输出至7个QLabel上。
